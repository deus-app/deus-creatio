(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9208:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9178)}])},9178:function(e,n,t){"use strict";t.r(n);var s=t(5893),a=t(987),r=t(8583),i=t(7294),o=t(5371),l=t(3376),c=t(2729),d=t.n(c);n.default=()=>{let[e]=(0,r.KO)(o.L),[n,t]=(0,i.useState)(!1),[c,u]=(0,i.useState)(""),[_,x]=(0,i.useState)(0),m=c.substring(0,_),g=(0,i.useRef)(null),[h,v]=(0,i.useState)({}),[p,f]=(0,i.useState)([]),[N,b]=(0,i.useState)(-1),j=(0,i.useCallback)(async()=>{if(!e){console.error("User is null or undefined!");return}let n=await l.x.dolan.$post({body:{id:e.id}});f(n)},[e]);(0,i.useEffect)(()=>{j();let e=setInterval(j,100);return()=>{clearInterval(e)}},[j]);let k=e=>{v(n=>({...n,[e]:!n[e]}))},w=async()=>{if(!e){console.error("User is null or undefined!");return}x(0),u("読み込み中..."),console.log("押した");let n=await l.x.langchain.$post({body:{id:e.id,values:h}});u(n.toString()),console.log(n)};return(0,i.useEffect)(()=>{let e=setInterval(()=>{_<c.length?(x(e=>e+1),g.current&&(g.current.scrollTop=g.current.scrollHeight)):clearInterval(e)},100);return()=>clearInterval(e)},[_,c]),(0,s.jsxs)("div",{className:d().container,children:[(0,s.jsx)("div",{className:d().conversationList,children:p.map((e,n)=>(0,s.jsxs)("div",{className:d().messageBox,children:[(0,s.jsx)("div",{style:{maxHeight:N===n?"none":"100px",overflow:"hidden"},children:e.message}),e.message.length>40&&N!==n&&(0,s.jsx)("button",{onClick:()=>b(n),children:"read more"}),N===n&&(0,s.jsx)("button",{onClick:()=>b(-1),children:"close"})]},n))}),(0,s.jsx)("div",{className:d().gridContainer,children:[...Array(8)].map((e,n)=>(0,s.jsx)("div",{className:d().gridItem,onClick:()=>k(n),children:(0,s.jsx)(a.Z,{})},n))}),(0,s.jsx)("button",{className:d().buttonAskDoraemon,onClick:w,children:"教えてドラえもん"}),(0,s.jsx)("div",{className:d().doraemonImage}),(0,s.jsx)("div",{ref:g,className:d().quote,children:m}),n&&(0,s.jsx)("div",{className:d().overlay,children:(0,s.jsxs)("div",{className:d().inputModal,children:[(0,s.jsx)("input",{type:"text",className:d().inputarea,placeholder:"ここに質問を入力"}),(0,s.jsx)("button",{className:d().closebutton,onClick:()=>t(!1),children:"閉じる"})]})})]})}},2729:function(e){e.exports={container:"index_container___q52_",conversationList:"index_conversationList__wZg0q",messageBox:"index_messageBox__pyWI4",gridContainer:"index_gridContainer__GN9wk",gridItem:"index_gridItem__v7Pnw",buttonAskDoraemon:"index_buttonAskDoraemon__kgcQS",doraemonImage:"index_doraemonImage__80TQJ",quote:"index_quote__3NMTm",overlay:"index_overlay__KG8_4",inputModal:"index_inputModal___TLdL",inputarea:"index_inputarea__FZHLB",closebutton:"index_closebutton__EhAu3"}}},function(e){e.O(0,[987,774,888,179],function(){return e(e.s=9208)}),_N_E=e.O()}]);