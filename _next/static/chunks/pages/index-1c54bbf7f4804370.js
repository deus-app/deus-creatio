(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9208:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(9178)}])},9178:function(e,n,s){"use strict";s.r(n);var o=s(5893),t=s(3482),a=s(9417),i=s(2489),r=s(987),l=s(8583),c=s(7294),d=s(5371),u=s(3376),_=s(2729),x=s.n(_);n.default=()=>{let[e]=(0,l.KO)(d.L),[n,s]=(0,c.useState)(!1),[_,m]=(0,c.useState)(""),[v,h]=(0,c.useState)(0),g=_.substring(0,v),j=(0,c.useRef)(null),[N,p]=(0,c.useState)({}),[w,C]=(0,c.useState)([]),[f,k]=(0,c.useState)(-1),[b,I]=(0,c.useState)(""),y=async()=>{let n=await u.x.raspi.$post({body:{id:null==e?void 0:e.id}});console.log(n)},L=(0,c.useCallback)(async()=>{if(!e){console.error("User is null or undefined!");return}let n=await u.x.dolan.$post({body:{id:e.id}});C(n)},[e]);(0,c.useEffect)(()=>{L();let e=setInterval(L,100);return()=>{clearInterval(e)}},[L]);let A=e=>{p(n=>({...n,[e]:!n[e]}))},B=async()=>{if(!e){console.error("User is null or undefined!");return}h(0),s(!1),m("読み込み中..."),console.log("押した");let n=await u.x.langchain.$post({body:{id:e.id,values:N,message:b}});m(n.toString()),console.log(n),I("")};return(0,c.useEffect)(()=>{let e=setInterval(()=>{v<_.length?(h(e=>e+1),j.current&&(j.current.scrollTop=j.current.scrollHeight)):clearInterval(e)},100);return()=>clearInterval(e)},[v,_]),(0,o.jsxs)("div",{className:x().container,children:[(0,o.jsx)("div",{className:x().conversationList,children:w.slice().reverse().map((e,n)=>(0,o.jsxs)("div",{className:x().messageBox,children:[(0,o.jsx)("div",{style:{maxHeight:f===n?"none":"100px",overflow:"hidden"},children:e.message}),e.message.length>40&&f!==n&&(0,o.jsx)("button",{onClick:()=>k(n),children:"read more"}),f===n&&(0,o.jsx)("button",{onClick:()=>k(-1),children:"close"})]},n))}),(0,o.jsx)("div",{className:x().gridContainer,children:[...Array(8)].map((e,n)=>(0,o.jsxs)("div",{className:x().gridItem,onClick:()=>A(n),children:[(0,o.jsx)("div",{className:x().switchCover,children:(0,o.jsx)(r.Z,{style:{backgroundColor:"#a8a8a8 "},checkedChildren:(0,o.jsx)("span",{style:{backgroundColor:"#a8a8a8"},children:"ON"})})}),0===n&&(0,o.jsx)("div",{className:x().FontAwesomeIconCover,children:(0,o.jsx)(i.G,{icon:a.FL8,color:"white",size:"4x"})}),1===n&&(0,o.jsx)("div",{className:x().FontAwesomeIconCover,children:(0,o.jsx)(i.G,{icon:a.S9Y,color:"white",size:"4x"})}),2===n&&(0,o.jsx)("div",{className:x().FontAwesomeIconCover,children:(0,o.jsx)(i.G,{icon:a.fkH,color:"white",size:"4x"})})]},n))}),(0,o.jsx)("button",{className:x().buttonAskDoraemon,onClick:()=>y(),children:"教えてDOLAN"}),(0,o.jsx)("div",{className:x().doraemonImage}),(0,o.jsx)("div",{ref:j,className:x().quote,children:g}),(0,o.jsx)("div",{className:x().dolanLabel,children:"DOLAN"}),n&&(0,o.jsx)("div",{className:x().overlay,children:(0,o.jsxs)("div",{className:x().inputModal,children:[(0,o.jsx)("input",{type:"text",className:x().inputarea,placeholder:"ここに質問を入力",value:b,onChange:e=>{I(e.target.value)}}),(0,o.jsx)("button",{className:x().sendButton,onClick:B,children:"送信"}),(0,o.jsx)("div",{className:x().closeButton,children:(0,o.jsx)(t.Z,{onClick:()=>s(!1)})})]})})]})}},2729:function(e){e.exports={container:"index_container___q52_",conversationList:"index_conversationList__wZg0q",messageBox:"index_messageBox__pyWI4",gridContainer:"index_gridContainer__GN9wk",gridItem:"index_gridItem__v7Pnw",switchCover:"index_switchCover__e23_L",FontAwesomeIconCover:"index_FontAwesomeIconCover__zVwZr",buttonAskDoraemon:"index_buttonAskDoraemon__kgcQS",dolanLabel:"index_dolanLabel__Pjevi",doraemonImage:"index_doraemonImage__80TQJ",quote:"index_quote__3NMTm",overlay:"index_overlay__KG8_4",inputModal:"index_inputModal___TLdL",inputarea:"index_inputarea__FZHLB",sendButton:"index_sendButton__Yndkl",closeButton:"index_closeButton__RnpYB"}}},function(e){e.O(0,[976,200,774,888,179],function(){return e(e.s=9208)}),_N_E=e.O()}]);