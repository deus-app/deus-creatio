(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9208:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(9178)}])},9178:function(e,n,s){"use strict";s.r(n);var a=s(5893),t=s(3482),o=s(987),l=s(8583),r=s(7294),i=s(5371),d=s(3376),c=s(2729),u=s.n(c);n.default=()=>{let[e]=(0,l.KO)(i.L),[n,s]=(0,r.useState)(!1),[c,_]=(0,r.useState)(""),[x,m]=(0,r.useState)(0),g=c.substring(0,x),h=(0,r.useRef)(null),[v,N]=(0,r.useState)({}),[p,j]=(0,r.useState)([]),[f,k]=(0,r.useState)(-1),[b,C]=(0,r.useState)(""),y=(0,r.useCallback)(async()=>{if(!e){console.error("User is null or undefined!");return}let n=await d.x.dolan.$post({body:{id:e.id}});j(n)},[e]);(0,r.useEffect)(()=>{y();let e=setInterval(y,100);return()=>{clearInterval(e)}},[y]);let w=e=>{N(n=>({...n,[e]:!n[e]}))},I=async()=>{if(!e){console.error("User is null or undefined!");return}m(0),s(!1),_("読み込み中..."),console.log("押した");let n=await d.x.langchain.$post({body:{id:e.id,values:v,message:b}});_(n.toString()),console.log(n),C("")};return(0,r.useEffect)(()=>{let e=setInterval(()=>{x<c.length?(m(e=>e+1),h.current&&(h.current.scrollTop=h.current.scrollHeight)):clearInterval(e)},100);return()=>clearInterval(e)},[x,c]),(0,a.jsxs)("div",{className:u().container,children:[(0,a.jsx)("div",{className:u().conversationList,children:p.slice().reverse().map((e,n)=>(0,a.jsxs)("div",{className:u().messageBox,children:[(0,a.jsx)("div",{style:{maxHeight:f===n?"none":"100px",overflow:"hidden"},children:e.message}),e.message.length>40&&f!==n&&(0,a.jsx)("button",{onClick:()=>k(n),children:"read more"}),f===n&&(0,a.jsx)("button",{onClick:()=>k(-1),children:"close"})]},n))}),(0,a.jsx)("div",{className:u().gridContainer,children:[...Array(8)].map((e,n)=>(0,a.jsx)("div",{className:u().gridItem,onClick:()=>w(n),children:(0,a.jsx)(o.Z,{style:{backgroundColor:"#a8a8a8 "},checkedChildren:(0,a.jsx)("span",{style:{backgroundColor:"#a8a8a8"},children:"ON"})})},n))}),(0,a.jsx)("button",{className:u().buttonAskDoraemon,onClick:()=>s(!0),children:"教えてDOLAN"}),(0,a.jsx)("div",{className:u().doraemonImage}),(0,a.jsx)("div",{ref:h,className:u().quote,children:g}),(0,a.jsx)("div",{className:u().dolanLabel,children:"DOLAN"}),n&&(0,a.jsx)("div",{className:u().overlay,children:(0,a.jsxs)("div",{className:u().inputModal,children:[(0,a.jsx)("input",{type:"text",className:u().inputarea,placeholder:"ここに質問を入力",value:b,onChange:e=>{C(e.target.value)}}),(0,a.jsx)("button",{className:u().sendButton,onClick:I,children:"送信"}),(0,a.jsx)("div",{className:u().closeButton,children:(0,a.jsx)(t.Z,{onClick:()=>s(!1)})})]})})]})}},2729:function(e){e.exports={container:"index_container___q52_",conversationList:"index_conversationList__wZg0q",messageBox:"index_messageBox__pyWI4",gridContainer:"index_gridContainer__GN9wk",gridItem:"index_gridItem__v7Pnw",buttonAskDoraemon:"index_buttonAskDoraemon__kgcQS",dolanLabel:"index_dolanLabel__Pjevi",doraemonImage:"index_doraemonImage__80TQJ",quote:"index_quote__3NMTm",overlay:"index_overlay__KG8_4",inputModal:"index_inputModal___TLdL",inputarea:"index_inputarea__FZHLB",sendButton:"index_sendButton__Yndkl",closeButton:"index_closeButton__RnpYB"}}},function(e){e.O(0,[402,774,888,179],function(){return e(e.s=9208)}),_N_E=e.O()}]);